extends ../layouts/layout

block meta
    include ../includes/meta/video

block stylesheets
    link(rel='stylesheet', href='/bower_components/videojs/dist/video-js/video-js.css')
    link(rel='stylesheet', href='/stylesheets/stream.css')
    link(rel='stylesheet', href='/stylesheets/movie.css')

block javascripts
    script(src='/bower_components/videojs/dist/video-js/video.js')
    script(type='text/javascript').
        videojs.options.flash.swf = 'video-js.swf';
        videojs('video');

block content
    .row
        .page-header
            h1 #{title}
                include ../includes/rating
                include ../includes/torrent_ratio
            p #{synopsis}
        .col-md-12
            include ../includes/video
    .row
        hr
        section.col-md-12.suggestions
            h3 Related movies
            each suggestion, index in suggestions
                if index % 4 == 0
                    hr.col-md-12
                .col-md-3
                    a(href="/movie/#{suggestion.id}")
                        img.img-responsive(src='#{suggestion.medium_cover_image}', alt='#{suggestion.title}')
    .row
        hr
        section.col-md-12
            #accordion.panel-group(role='tablist', aria-multiselectable='false')
                .panel.panel-default
                    #headingOne.panel-heading(role='tab')
                      h4.panel-title
                        a(role='button', data-toggle='collapse', data-parent='#accordion', href='#collapseOne', aria-expanded='false', aria-controls='collapseOne') #{comments.count} comments
                    #collapseOne.panel-collapse.collapse.comments(role='tabpanel', aria-labelledby='headingOne')
                        .panel-body
                            each comment in comments.list
                                article.comment
                                    header
                                        div.comment__img
                                            img(src="#{comment.small_user_avatar_image}")
                                        div.comment__media
                                            span.comment__username #{comment.username}
                                            span.comment__date
                                                strong Posted
                                                !{moment(comment.date_added).fromNow()}
                                    p.comment__body !{comment.comment_text}
                                hr